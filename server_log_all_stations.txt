
> metra-schedule-tracker@1.0.0 start
> NODE_ENV=production node dist/index.js

[dotenv@17.2.3] injecting env (2) from .env -- tip: ðŸ” prevent building .env in docker: https://dotenvx.com/prebuild
Found 1966 trips (UP-NW + MD-W + UP-N + BNSF)
Found 35482 stop times for all supported lines
Inserted 3932 schedule records
GTFS data loaded successfully!
â° [SCHEDULE] Forcing immediate daily seed for verification (ALL STATIONS)...
â° [SCHEDULE] Starting daily crowding seed (3:30 AM)...
â° [SCHEDULE] Adding priority route: SCHAUM->CUS
â° [SCHEDULE] Adding priority route: WESTMONT->CUS
â° [SCHEDULE] Adding priority route: CUS->WESTMONT
â° [SCHEDULE] Found 8 routes to seed: PALATINE->OTC, OTC->WILMETTE, OTC->PALATINE, WILMETTE->OTC, CUS->SCHAUM, SCHAUM->CUS, WESTMONT->CUS, CUS->WESTMONT
[SCHEDULED] Starting scraping for PALATINE->OTC (Line: UP-NW)...
â° [SCHEDULE] Next daily scrape scheduled for 12/19/2025, 3:30:00 AM (in 2 hours)
ðŸ“… GTFS: Data is just updated, no update needed
âœ… Database initialized successfully
â±ï¸  Starting real-time data polling...
ðŸŒ¦ï¸  Starting weather data polling (dynamic interval)...
ðŸŒ¦ï¸  Next weather update in 30 min (active=false)
âœ… Using Puppeteer's bundled Chrome at: /Users/davidoh/.cache/puppeteer/chrome/mac_arm-143.0.7499.42/chrome-mac-arm64/Google Chrome for Testing.app/Contents/MacOS/Google Chrome for Testing
[SCHEDULED] Using overridden schedule date: 12/19/2025, 4:00:00 AM (1766138400)
[SCHEDULED] Constructed URL: https://www.metra.com/schedules?line=UP-NW&orig=PALATINE&dest=OTC&time=1766138400&allstops=0&redirect=1766128654
Real-time data updated successfully
âœ… Weather data updated for 3 locations
âœ… Backend server running on http://localhost:3001/
ðŸ“¡ API endpoints available at http://localhost:3001/api/*
[SCHEDULED] Saved/Updated 35 entries for PALATINE->OTC
[SCHEDULED] Starting scraping for OTC->WILMETTE (Line: UP-N)...
[SCHEDULED] Using overridden schedule date: 12/19/2025, 4:00:00 AM (1766138400)
[SCHEDULED] Constructed URL: https://www.metra.com/schedules?line=UP-N&orig=OTC&dest=WILMETTE&time=1766138400&allstops=0&redirect=1766128671
[SCHEDULED] Saved/Updated 36 entries for OTC->WILMETTE
â±ï¸  Server polling aligned to wall clock (:00/:30)
Real-time data updated successfully
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[SCHEDULED] Starting scraping for OTC->PALATINE (Line: UP-NW)...
[SCHEDULED] Using overridden schedule date: 12/19/2025, 4:00:00 AM (1766138400)
[SCHEDULED] Constructed URL: https://www.metra.com/schedules?line=UP-NW&orig=OTC&dest=PALATINE&time=1766138400&allstops=0&redirect=1766128689
[SCHEDULED] Saved/Updated 34 entries for OTC->PALATINE
[API] [1766128696455-ny1wct3tj] Crowding request: OTC->WILMETTE (force=undefined)
[API] [1766128696455-ny1wct3tj] Railway env check - NODE_ENV: production, PORT: undefined
[DB] Schema check passed: 'predicted_departure' column exists.
[CACHE HIT] Returning cached crowding data for OTC->WILMETTE (36 trains, -360 min old)
[API] [1766128696455-ny1wct3tj] Request completed in 0ms
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[SCHEDULED] Starting scraping for WILMETTE->OTC (Line: UP-N)...
[SCHEDULED] Using overridden schedule date: 12/19/2025, 4:00:00 AM (1766138400)
[SCHEDULED] Constructed URL: https://www.metra.com/schedules?line=UP-N&orig=WILMETTE&dest=OTC&time=1766138400&allstops=0&redirect=1766128706
Real-time data updated successfully
[SCHEDULED] Saved/Updated 35 entries for WILMETTE->OTC
[SCHEDULED] Starting scraping for CUS->SCHAUM (Line: MD-W)...
[SCHEDULED] Using overridden schedule date: 12/19/2025, 4:00:00 AM (1766138400)
[SCHEDULED] Constructed URL: https://www.metra.com/schedules?line=MD-W&orig=CUS&dest=SCHAUM&time=1766138400&allstops=0&redirect=1766128723
[SCHEDULED] Saved/Updated 22 entries for CUS->SCHAUM
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
Real-time data updated successfully
[POSITIONS] Bulk cached 4 trains across all lines
[SCHEDULED] Starting scraping for SCHAUM->CUS (Line: MD-W)...
[SCHEDULED] Using overridden schedule date: 12/19/2025, 4:00:00 AM (1766138400)
[SCHEDULED] Constructed URL: https://www.metra.com/schedules?line=MD-W&orig=SCHAUM&dest=CUS&time=1766138400&allstops=0&redirect=1766128741
[SCHEDULED] Saved/Updated 20 entries for SCHAUM->CUS
[SCHEDULED] Starting scraping for WESTMONT->CUS (Line: BNSF)...
[SCHEDULED] Using overridden schedule date: 12/19/2025, 4:00:00 AM (1766138400)
[SCHEDULED] Constructed URL: https://www.metra.com/schedules?line=BNSF&orig=WESTMONT&dest=CUS&time=1766138400&allstops=0&redirect=1766128758
[SCHEDULED] Saved/Updated 33 entries for WESTMONT->CUS
[API] [1766128767912-33m79v3pt] Crowding request: PALATINE->OTC (force=undefined)
[API] [1766128767912-33m79v3pt] Railway env check - NODE_ENV: production, PORT: undefined
[DB] Schema check passed: 'predicted_departure' column exists.
[CACHE HIT] Returning cached crowding data for PALATINE->OTC (35 trains, -358 min old)
[API] [1766128767912-33m79v3pt] Request completed in 0ms
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
Real-time data updated successfully
[API] [1766128775803-l8hmpke40] Crowding request: WESTMONT->CUS (force=undefined)
[API] [1766128775803-l8hmpke40] Railway env check - NODE_ENV: production, PORT: undefined
[DB] Schema check passed: 'predicted_departure' column exists.
[CACHE HIT] Returning cached crowding data for WESTMONT->CUS (33 trains, -360 min old)
[API] [1766128775803-l8hmpke40] Request completed in 0ms
[SCHEDULED] Starting scraping for CUS->WESTMONT (Line: BNSF)...
[SCHEDULED] Using overridden schedule date: 12/19/2025, 4:00:00 AM (1766138400)
[SCHEDULED] Constructed URL: https://www.metra.com/schedules?line=BNSF&orig=CUS&dest=WESTMONT&time=1766138400&allstops=0&redirect=1766128776
[SCHEDULED] Saved/Updated 32 entries for CUS->WESTMONT
â° [SCHEDULE] Daily seed completed!
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
Real-time data updated successfully
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[API] [1766128810414-ilipgk6uk] Crowding request: PALATINE->OTC (force=undefined)
[API] [1766128810414-ilipgk6uk] Railway env check - NODE_ENV: production, PORT: undefined
[DB] Schema check passed: 'predicted_departure' column exists.
[CACHE HIT] Returning cached crowding data for PALATINE->OTC (35 trains, -358 min old)
[API] [1766128810414-ilipgk6uk] Request completed in 0ms
Real-time data updated successfully
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[API] [1766128835805-64gjwa5mv] Crowding request: WESTMONT->CUS (force=undefined)
[API] [1766128835805-64gjwa5mv] Railway env check - NODE_ENV: production, PORT: undefined
[DB] Schema check passed: 'predicted_departure' column exists.
[CACHE HIT] Returning cached crowding data for WESTMONT->CUS (33 trains, -359 min old)
[API] [1766128835805-64gjwa5mv] Request completed in 0ms
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
Real-time data updated successfully
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[API] [1766128872317-nvar9led1] Crowding request: WESTMONT->CUS (force=undefined)
[API] [1766128872317-nvar9led1] Railway env check - NODE_ENV: production, PORT: undefined
[DB] Schema check passed: 'predicted_departure' column exists.
[CACHE HIT] Returning cached crowding data for WESTMONT->CUS (33 trains, -358 min old)
[API] [1766128872317-nvar9led1] Request completed in 0ms
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
Real-time data updated successfully
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[API] [1766128895805-tv2c4c26e] Crowding request: WESTMONT->CUS (force=undefined)
[API] [1766128895805-tv2c4c26e] Railway env check - NODE_ENV: production, PORT: undefined
[DB] Schema check passed: 'predicted_departure' column exists.
[CACHE HIT] Returning cached crowding data for WESTMONT->CUS (33 trains, -358 min old)
[API] [1766128895805-tv2c4c26e] Request completed in 0ms
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
Real-time data updated successfully
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[API] [1766128927188-srkhgj70o] Crowding request: SCHAUM->CUS (force=undefined)
[API] [1766128927188-srkhgj70o] Railway env check - NODE_ENV: production, PORT: undefined
[DB] Schema check passed: 'predicted_departure' column exists.
[CACHE HIT] Returning cached crowding data for SCHAUM->CUS (20 trains, -357 min old)
[API] [1766128927188-srkhgj70o] Request completed in 1ms
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
Real-time data updated successfully
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[API] [1766128955807-iwvozi2eu] Crowding request: WESTMONT->CUS (force=undefined)
[API] [1766128955807-iwvozi2eu] Railway env check - NODE_ENV: production, PORT: undefined
[DB] Schema check passed: 'predicted_departure' column exists.
[CACHE HIT] Returning cached crowding data for WESTMONT->CUS (33 trains, -357 min old)
[API] [1766128955807-iwvozi2eu] Request completed in 1ms
[POSITIONS] Bulk cached 4 trains across all lines
Real-time data updated successfully
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[API] [1766128990031-t6kykiwk2] Crowding request: CUS->WESTMONT (force=undefined)
[API] [1766128990031-t6kykiwk2] Railway env check - NODE_ENV: production, PORT: undefined
[DB] Schema check passed: 'predicted_departure' column exists.
[CACHE HIT] Returning cached crowding data for CUS->WESTMONT (32 trains, -357 min old)
[API] [1766128990031-t6kykiwk2] Request completed in 1ms
[POSITIONS] Bulk cached 4 trains across all lines
Real-time data updated successfully
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
Real-time data updated successfully
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[POSITIONS] Bulk cached 4 trains across all lines
[API] [1766129055275-k6sxy0qpw] Crowding request: SCHAUM->CUS (force=undefined)
[API] [1766129055275-k6sxy0qpw] Railway env check - NODE_ENV: production, PORT: undefined
[DB] Schema check passed: 'predicted_departure' column exists.
[CACHE HIT] Returning cached crowding data for SCHAUM->CUS (20 trains, -355 min old)
[API] [1766129055275-k6sxy0qpw] Request completed in 1ms
